workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge request event"
    - if: $CI_COMMIT_BRANHC && $CI_OPEN_MERGE_REQUESTS
      when: never
    - if: $CI_COMMIT_BRANCH
    - if: $CI_PIPELINE_TAG

stages:
  - security
  - lint

include:
  - template: Security/SAST.gitlab-ci.yml
  - template: Security/DAST.gitlab-ci.yml

sast:
  stage: security

dast:
  stage: security

markdown_lint:
  stage: lint
  image: ghcr.io/igorshubovych/markdownlint-cli:latest
  allow_failure: true
  rules:
    - changes:
        - "**/*.md"
  script:
    - markdownlint "**/*.md"